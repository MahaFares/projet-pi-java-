{% extends 'BackOffice/base.html.twig' %}

{% block title %}{{ activity.title }} - Admin{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        .detail-header {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            box-shadow: 0 8px 24px rgba(5, 150, 105, 0.25);
        }
        .detail-header h1 { margin: 0; font-size: 1.75rem; font-weight: 700; display: flex; align-items: center; gap: 0.75rem; }
        .detail-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 1.5rem;
        }
        .detail-row { display: flex; flex-wrap: wrap; gap: 2rem; }
        .detail-col-img { flex: 0 0 320px; }
        .detail-col-info { flex: 1; min-width: 280px; }
        .activity-image-show {
            width: 100%;
            max-height: 320px;
            object-fit: cover;
            border-radius: 12px;
        }
        .detail-placeholder {
            height: 280px;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #059669;
            font-size: 4rem;
        }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; }
        .info-item { padding: 0.75rem 1rem; background: #f8fafc; border-radius: 10px; }
        .info-item label { font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; display: block; margin-bottom: 0.25rem; }
        .info-item span { font-weight: 600; color: #0f172a; }
        .badge-status { padding: 0.4rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }
        .badge-active { background: #d4edda; color: #155724; }
        .badge-inactive { background: #f8d7da; color: #721c24; }
        .form-actions { display: flex; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0; }
        .modern-btn { padding: 0.75rem 1.5rem; font-weight: 600; border-radius: 10px; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; transition: all 0.2s; }
        .btn-primary-custom { background: linear-gradient(135deg, #059669, #047857); color: white; }
        .btn-secondary-custom { background: #f1f5f9; color: #475569; border: 2px solid #e2e8f0; }
        .modern-btn:hover { transform: translateY(-2px); }
        .desc-block { color: #475569; line-height: 1.6; white-space: pre-wrap; }
    </style>
{% endblock %}

{% block body %}
<div class="container-fluid py-4">
    {{ include('admin_nav.html.twig') }}

    <div class="detail-header">
        <h1><i class="bi bi-activity"></i> {{ activity.title }}</h1>
        <p class="mb-0 mt-2 opacity-90">{{ activity.category ? activity.category.name : 'Sans catégorie' }}</p>
    </div>

    <div class="detail-card">
        <div class="detail-row">
            <div class="detail-col-img">
                {% if activity.image %}
                    <img src="{{ asset(activity.image) }}" alt="{{ activity.title }}" class="activity-image-show">
                {% else %}
                    <div class="detail-placeholder"><i class="bi bi-image"></i></div>
                {% endif %}
            </div>
            <div class="detail-col-info">
                <div class="info-grid mb-3">
                    <div class="info-item">
                        <label>Prix</label>
                        <span>{{ activity.price }} DT</span>
                    </div>
                    <div class="info-item">
                        <label>Durée</label>
                        <span>{{ activity.durationMinutes }} min</span>
                    </div>
                    <div class="info-item">
                        <label>Lieu</label>
                        <span>{{ activity.location }}</span>
                    </div>
                    <div class="info-item">
                        <label>Max participants</label>
                        <span>{{ activity.maxParticipants|default('–') }}</span>
                    </div>
                    <div class="info-item">
                        <label>Statut</label>
                        <span class="badge-status {{ activity.isActive ? 'badge-active' : 'badge-inactive' }}">
                            {{ activity.isActive ? 'Actif' : 'Inactif' }}
                        </span>
                    </div>
                    <div class="info-item">
                        <label>Catégorie</label>
                        <span>{{ activity.category ? activity.category.name : '–' }}</span>
                    </div>
                    <div class="info-item">
                        <label>Guide</label>
                        <span>{{ activity.guide ? activity.guide.firstName ~ ' ' ~ activity.guide.lastName : '–' }}</span>
                    </div>
                </div>
                {% if activity.description %}
                    <div class="mb-0">
                        <label class="d-block fw-bold text-muted small text-uppercase mb-2">Description</label>
                        <div class="desc-block">{{ activity.description }}</div>
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-actions">
            <a href="{{ path('app_activity_edit', {'id': activity.id}) }}" class="modern-btn btn-primary-custom">
                <i class="bi bi-pencil"></i> Modifier
            </a>
            <a href="{{ path('app_activity_index') }}" class="modern-btn btn-secondary-custom">
                <i class="bi bi-arrow-left"></i> Retour à la liste
            </a>
            <form method="post" action="{{ path('app_activity_delete', {'id': activity.id}) }}" onsubmit="return confirm('Supprimer cette activité ?');" class="d-inline">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ activity.id) }}">
                <button type="submit" class="modern-btn" style="background:#fef2f2;color:#dc2626;border:2px solid #fecaca;">
                    <i class="bi bi-trash"></i> Supprimer
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
