{{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}, 'multipart': true}) }}
    <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
        <div class="card-body p-4 p-md-5">
            <h5 class="fw-bold text-dark mb-4 pb-2 border-bottom">
                <i class="fas fa-info-circle text-primary me-2"></i>Informations générales
            </h5>
            
            <div class="row g-4">
                <div class="col-md-8">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.nom, {'attr': {'class': 'form-control', 'placeholder': 'Nom de l\'hébergement'}}) }}
                        {{ form_label(form.nom) }}
                        {{ form_errors(form.nom) }}
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.nbEtoiles, {'attr': {'class': 'form-control', 'placeholder': 'Étoiles', 'min': '0', 'max': '5'}}) }}
                        {{ form_label(form.nbEtoiles, 'Nombre d\'étoiles') }}
                        {{ form_errors(form.nbEtoiles) }}
                    </div>
                </div>
            </div>

            <div class="form-floating mb-4">
                {{ form_widget(form.description, {'attr': {'class': 'form-control', 'placeholder': 'Description', 'style': 'height: 150px;'}}) }}
                {{ form_label(form.description) }}
                {{ form_errors(form.description) }}
            </div>

            <h5 class="fw-bold text-dark mb-4 mt-5 pb-2 border-bottom">
                <i class="fas fa-map-marked-alt text-info me-2"></i>Localisation
            </h5>
            
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.adresse, {'attr': {'class': 'form-control', 'placeholder': 'Adresse'}}) }}
                        {{ form_label(form.adresse) }}
                        {{ form_errors(form.adresse) }}
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.ville, {'attr': {'class': 'form-control', 'placeholder': 'Ville'}}) }}
                        {{ form_label(form.ville) }}
                        {{ form_errors(form.ville) }}
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.latitude, {'attr': {'class': 'form-control', 'placeholder': 'Latitude'}}) }}
                        {{ form_label(form.latitude) }}
                        {{ form_errors(form.latitude) }}
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.longitude, {'attr': {'class': 'form-control', 'placeholder': 'Longitude'}}) }}
                        {{ form_label(form.longitude) }}
                        {{ form_errors(form.longitude) }}
                    </div>
                </div>
            </div>

            <h5 class="fw-bold text-dark mb-4 mt-5 pb-2 border-bottom">
                <i class="fas fa-camera-retro text-success me-2"></i>Médias & Attribution
            </h5>
            
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label fw-600 text-muted small px-2">Image Principale (URL ou nom du fichier)</label>
                        {{ form_widget(form.imagePrincipale, {'attr': {'class': 'form-control form-control-lg rounded-3', 'placeholder': 'Ex: hotel.jpg'}}) }}
                        {{ form_errors(form.imagePrincipale) }}
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.labelEco, {'attr': {'class': 'form-control', 'placeholder': 'Label Éco'}}) }}
                        {{ form_label(form.labelEco) }}
                        {{ form_errors(form.labelEco) }}
                    </div>
                </div>
            </div>

            {% if form.categorie is defined or form.equipements is defined or form.propietaire is defined %}
            <div class="row g-4 mt-2">
                {% if form.categorie is defined %}
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.categorie, {'attr': {'class': 'form-select'}}) }}
                        {{ form_label(form.categorie) }}
                        {{ form_errors(form.categorie) }}
                    </div>
                </div>
                {% endif %}
                {% if form.equipements is defined %}
                <div class="col-md-6">
                    <div class="form-floating mb-3">
                        {{ form_widget(form.equipements, {'attr': {'class': 'form-select', 'multiple': 'multiple', 'style': 'height: 100px;'}}) }}
                        {{ form_label(form.equipements) }}
                        {{ form_errors(form.equipements) }}
                    </div>
                </div>
                {% endif %}
            </div>

            {% if form.propietaire is defined %}
            <div class="mt-4 p-4 rounded-4 bg-primary-subtle border border-primary-subtle shadow-sm">
                <h6 class="fw-bold text-primary mb-3">
                    <i class="fas fa-user-tie me-2"></i>Attribution Propriétaire
                </h6>
                <div class="form-floating">
                    {{ form_widget(form.propietaire, {'attr': {'class': 'form-select shadow-none', 'style': 'border-color: #cbd5e1'}}) }}
                    {{ form_label(form.propietaire, 'Sélectionner le Propriétaire') }}
                    {{ form_errors(form.propietaire) }}
                </div>
                <p class="text-muted small mt-2 mb-0">
                    <i class="fas fa-info-circle me-1"></i> Cet utilisateur aura les droits de gestion sur cet établissement.
                </p>
            </div>
            {% endif %}
            {% endif %}

            <div class="mt-5 p-4 rounded-4 bg-light border">
                <div class="d-flex align-items-center justify-content-between">
                    <div>
                        <h6 class="fw-bold mb-1">Statut de visibilité</h6>
                        <p class="text-muted small mb-0">Rendre cet hébergement visible sur le site immédiatement.</p>
                    </div>
                    <div class="form-check form-switch form-switch-lg">
                        {{ form_widget(form.actif, {'attr': {'class': 'form-check-input'}}) }}
                        {{ form_label(form.actif, ' ', {'label_attr': {'class': 'form-check-label'}}) }}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card-footer bg-white p-4 p-md-5 border-top-0 pt-0">
            <div class="d-flex flex-column flex-md-row gap-3">
                <button type="submit" class="btn btn-primary btn-lg rounded-pill px-5 py-3 shadow-sm transition-all hover-lift">
                    <i class="fas fa-check-circle me-2"></i>{{ button_label|default('Enregistrer les modifications') }}
                </button>
                <a href="{{ path('app_hebergement_index') }}" class="btn btn-light btn-lg rounded-pill px-5 py-3 border transition-all hover-lift">
                    <i class="fas fa-times me-2"></i>Annuler
                </a>
            </div>
        </div>
    </div>
{{ form_end(form) }}

<style>
    .form-floating > .form-control:focus, .form-floating > .form-control:not(:placeholder-shown) {
        padding-top: 1.625rem;
        padding-bottom: 0.625rem;
    }
    .form-floating > label {
        padding-left: 1rem;
    }
    .form-check-input {
        width: 3em !important;
        height: 1.5em !important;
        cursor: pointer;
    }
    .hover-lift:hover {
        transform: translateY(-2px);
    }
    .transition-all {
        transition: all 0.3s ease;
    }
    .fw-600 { font-weight: 600; }
</style>

<script>
    (function () {
      'use strict'
      const forms = document.querySelectorAll('.needs-validation')
      Array.prototype.slice.call(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
            form.classList.add('was-validated')
          }, false)
        })
    })()
</script>
